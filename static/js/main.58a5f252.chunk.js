(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{111:function(e,t,n){e.exports={navbar:"Navbar_navbar__AYGyQ"}},112:function(e,t,n){e.exports={main:"App_main__2IQkG"}},113:function(e,t,n){e.exports={overlay:"ModalOverlay_overlay__1B056"}},114:function(e,t,n){e.exports={controls:"Tabs_controls__2bjtp"}},116:function(e,t,n){e.exports={list:"IngredientList_list__qUxf_"}},117:function(e,t,n){e.exports={item:"BurgerConstructorItem_item__1Fujk"}},118:function(e,t,n){e.exports={error:"Error_error__NuFxq"}},119:function(e,t,n){e.exports={ingredient:"Ingredient_ingredient__3DNw6"}},120:function(e,t,n){e.exports={tape:"OrderTape_tape__3ksdz"}},204:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var r,c,a,s,i=n(1),o=n.n(i),u=n(39),l=n.n(u),d=n(7),j=n(3),b=n(14),m=n(49),p=n.n(m),O=n(0),f=function(e){var t=e.icon,n=e.path,r=e.children,c=Object(b.j)({path:n,exact:!0});return Object(O.jsxs)(d.b,{to:n,className:"\n        ".concat(c&&n?p.a.active:"","\n        ").concat(n?"":p.a.disabled,"\n        ").concat(p.a.button,"\n        pl-5 pr-5 pt-4 pb-4\n        text text_type_main-default\n      "),children:[Object(O.jsx)("span",{className:"".concat(p.a.icon," mr-2"),children:t}),r]})},x=n(111),h=n.n(x),_=function(){var e=[{id:0,name:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",icon:Object(O.jsx)(j.BurgerIcon,{type:"primary"}),path:"/"},{id:1,name:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",icon:Object(O.jsx)(j.ListIcon,{type:"primary"}),path:"/feed"}];return Object(O.jsx)("nav",{className:h.a.navbar,children:e.map((function(e){return Object(O.jsx)(f,{icon:e.icon,path:e.path,children:e.name},e.id)}))})},g=n(62),v=n.n(g),y=function(){return Object(O.jsx)("header",{className:v.a.header,children:Object(O.jsxs)("div",{className:"".concat(v.a.container," container"),children:[Object(O.jsx)(_,{}),Object(O.jsx)("div",{className:v.a.logo,children:Object(O.jsx)(d.b,{to:"/",children:Object(O.jsx)(j.Logo,{})})}),Object(O.jsx)(f,{icon:Object(O.jsx)(j.ProfileIcon,{type:"primary"}),path:"/profile",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})},N=n(112),w=n.n(N),I=n(15),k=n(4),C=n(11),S=n.n(C),E=n(18),T=n(9),D="https://norma.nomoreparties.space/api",q="".concat(D,"/ingredients"),B="".concat(D,"/orders"),P="".concat(D,"/auth/login"),L="".concat(D,"/auth/register"),F="".concat(D,"/auth/logout"),M="".concat(D,"/auth/token"),R="".concat(D,"/password-reset"),A="".concat(D,"/password-reset/reset"),J="".concat(D,"/auth/user"),W="".concat(D,"/auth/user"),z=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},H=function(e,t){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){var t=e.accessToken,n=e.refreshToken;return localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",n),e}))},G=function(e,t){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(z)},U=function(){var e=Object(E.a)(S.a.mark((function e(t,n){var r,c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return r=e.sent,e.next=6,z(r);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=26;break}return e.next=14,fetch(M,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return z(e)}));case 14:return c=e.sent,localStorage.setItem("refreshToken",c.refreshToken),localStorage.setItem("accessToken",c.accessToken),n.headers.authorization=c.accessToken,e.next=20,fetch(t,n);case 20:return a=e.sent,e.next=23,z(a);case 23:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",Promise.reject(e.t0));case 27:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=Object(T.c)("ingredients/fetchIngredientsStatus",Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(q).then(z));case 1:case"end":return e.stop()}}),e)})))),Q=Object(T.d)({name:"ingredients",initialState:{request:!1,error:!1,ingredients:[]},reducers:{},extraReducers:(r={},Object(k.a)(r,Z.pending.type,(function(e,t){e.request=!0,e.error=!1})),Object(k.a)(r,Z.fulfilled.type,(function(e,t){e.request=!1,e.ingredients=t.payload.data})),Object(k.a)(r,Z.rejected.type,(function(e,t){e.request=!1,e.ingredients=[],e.error=t.error.message})),r)}),V=function(e){return e.ingredients},Y=Q.reducer,$=n(50),X=n.n($),K=function(){var e=Object(b.i)().id,t=Object(I.c)(V).ingredients.find((function(t){return t._id===e}));return t?Object(O.jsxs)("div",{className:X.a.ingredient,children:[Object(O.jsx)("img",{className:"".concat(X.a.image," mb-4"),src:t.image_large,alt:t.name}),Object(O.jsx)("h3",{className:"text text_type_main-medium mb-8",children:t.name}),Object(O.jsx)("ul",{className:X.a.list,children:[{id:0,name:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b",key:"calories"},{id:1,name:"\u0411\u0435\u043b\u043a\u0438, \u0433",key:"proteins"},{id:2,name:"\u0416\u0438\u0440\u044b, \u0433",key:"fat"},{id:3,name:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",key:"carbohydrates"}].map((function(e){return Object(O.jsxs)("li",{className:"".concat(X.a.item," text text_color_inactive"),children:[Object(O.jsx)("span",{className:"text_type_main-default mb-2",children:e.name}),Object(O.jsx)("span",{className:"text_type_digits-default",children:t[e.key]})]},e.id)}))})]}):null},ee=n(113),te=n.n(ee),ne=function(e){var t=e.close;return Object(O.jsx)("div",{className:te.a.overlay,onClick:t})},re=n(51),ce=n.n(re),ae=document.getElementById("modal"),se=function(e){var t=e.title,n=e.children,r=e.close,c=e.classes;Object(i.useEffect)((function(){return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}),[]);var a=function(e){"Escape"===e.key&&r()};return l.a.createPortal(Object(O.jsxs)("div",{className:ce.a.modal,children:[Object(O.jsxs)("div",{className:"".concat(ce.a.content," ").concat(c," pl-10 pr-10"),children:[Object(O.jsxs)("div",{className:ce.a.head,children:[t&&Object(O.jsx)("div",{className:"text text_type_main-large",children:t}),Object(O.jsx)("button",{className:ce.a.close,onClick:r,children:Object(O.jsx)(j.CloseIcon,{type:"primary"})})]}),n]}),Object(O.jsx)(ne,{close:r})]}),ae)},ie=n(6),oe=n(122),ue=Object(T.c)("auth/registerUser",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(L,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=Object(T.c)("auth/authUser",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(P,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),de=Object(T.c)("auth/canResetPassword",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(R,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),je=Object(T.c)("auth/resetPassword",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(A,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),be=Object(T.c)("auth/getUser",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(J,{headers:{authorization:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),me=Object(T.c)("auth/updateUser",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(W,{method:"PATCH",body:JSON.stringify(t),headers:{authorization:localStorage.getItem("accessToken"),"Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pe=Object(T.c)("auth/logout",Object(E.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(F,{method:"POST",body:JSON.stringify({token:localStorage.getItem("refreshToken")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e.json()):e.json().then((function(e){return Promise.reject(e)}))})));case 1:case"end":return e.stop()}}),e)})))),Oe={request:!1,error:"",user:{email:"",name:""},passwordReset:!1},fe=Object(T.d)({name:"auth",initialState:Oe,reducers:{},extraReducers:(c={},Object(k.a)(c,ue.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,ue.fulfilled.type,(function(e,t){e.request=!1,e.user=t.payload.user})),Object(k.a)(c,ue.rejected.type,(function(e,t){e.request=!1,e.user=Object(ie.a)({},Oe.user),e.error=t.error.message})),Object(k.a)(c,le.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,le.fulfilled.type,(function(e,t){e.request=!1,e.passwordReset=!1,e.user=t.payload.user})),Object(k.a)(c,le.rejected.type,(function(e,t){e.request=!1,e.user=Object(ie.a)({},Oe.user),e.error=t.error.message})),Object(k.a)(c,de.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,de.fulfilled.type,(function(e,t){e.request=!1,e.passwordReset=t.payload.success})),Object(k.a)(c,de.rejected.type,(function(e,t){e.request=!1,e.error=t.error.message,e.passwordReset=!1})),Object(k.a)(c,je.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,je.fulfilled.type,(function(e,t){e.request=!1,e.passwordReset=!1})),Object(k.a)(c,je.rejected.type,(function(e,t){e.request=!1,e.error=t.error.message})),Object(k.a)(c,be.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,be.fulfilled.type,(function(e,t){e.request=!1,e.passwordReset=!1,e.user=t.payload.user})),Object(k.a)(c,be.rejected.type,(function(e){e.request=!1,e.user=Object(ie.a)({},Oe.user)})),Object(k.a)(c,me.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,me.fulfilled.type,(function(e,t){e.request=!1,e.user=t.payload.user})),Object(k.a)(c,me.rejected.type,(function(e,t){e.request=!1,e.error=t.error.message,e.user=Object(ie.a)({},Oe.user)})),Object(k.a)(c,pe.pending.type,(function(e){e.request=!0,e.error=""})),Object(k.a)(c,pe.fulfilled.type,(function(e){e.request=!1,e.user=Object(ie.a)({},Oe.user)})),Object(k.a)(c,pe.rejected.type,(function(e,t){e.request=!1,e.error=t.error.message})),c)}),xe=function(e){return e.auth},he=fe.reducer,_e=["children"],ge=function(e){var t=e.children,n=Object(oe.a)(e,_e),r=Object(I.c)(xe).user;return Object(O.jsx)(b.b,Object(ie.a)(Object(ie.a)({},n),{},{render:function(e){var n=e.location;return r.name?t:Object(O.jsx)(b.a,{to:{pathname:"/login",state:{from:n}}})}}))},ve=n(10),ye=n(114),Ne=n.n(ye),we=function(e){var t=e.tabs,n=e.currentTab,r=e.setCurrentTab;return Object(O.jsx)("div",{className:Ne.a.controls,children:t.map((function(e){return Object(O.jsx)(j.Tab,{value:e,active:n===e,onClick:r,children:e},e)}))})},Ie=n(40),ke=n.n(Ie),Ce=n(218),Se=n(214),Ee=n(217),Te=function(){return Object(Ce.a)()},De=function(e){return Object(Se.a)(new Date(e),new Date,{locale:Ee.a})},qe=function(e,t){return e.reduce((function(e,n){return(e[n[t]]||(e[n[t]]=[])).push(n),e}),{})},Be={"\u0411\u0443\u043b\u043a\u0438":"bun","\u041d\u0430\u0447\u0438\u043d\u043a\u0438":"main","\u0421\u043e\u0443\u0441\u044b":"sauce",bun:"\u0411\u0443\u043b\u043a\u0438",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",created:"\u0421\u043e\u0437\u0434\u0430\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",_created:"\u0421\u043e\u0437\u0434\u0430\u043d:",_pending:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",_done:"\u0413\u043e\u0442\u043e\u0432\u044b:"},Pe=n(215),Le=n(48),Fe=Object(T.d)({name:"burgerConstructor",initialState:{ingredients:[],bun:null},reducers:{addBun:function(e,t){e.bun=t.payload},addIngridient:function(e,t){e.ingredients.push(t.payload)},removeIngredient:function(e,t){e.ingredients=Object(Le.a)(e.ingredients.filter((function(e){return e.id!==t.payload})))},removeAllIngredients:function(e){e.ingredients=[],e.bun=null},changeItemsPosition:function(e,t){var n=Object(Le.a)(e.ingredients);n.splice(t.payload.dragIndex,0,n.splice(t.payload.hoverIndex,1)[0]),e.ingredients=n}}}),Me=Fe.actions,Re=Me.addIngridient,Ae=Me.removeIngredient,Je=Me.addBun,We=Me.removeAllIngredients,ze=Me.changeItemsPosition,He=function(e){return e.burgerConstructor},Ge=Fe.reducer,Ue=function(e){var t=e.item,n=e.count,r=Object(b.h)(),c=Object(I.b)(),a=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).onDragEnd,r=Object(Pe.a)((function(){return{type:t,item:e,end:function(e,t){var r=t.getDropResult();e&&r&&"function"===typeof n&&n()},collect:function(e){return{isDragging:e.isDragging()}}}})),c=Object(ve.a)(r,2),a=c[0].isDragging,s=c[1];return{isDragging:a,drag:s}}(t,t.type,{onDragEnd:function(){"bun"!==t.type?c(Re(Object(ie.a)(Object(ie.a)({},t),{},{id:Te()}))):c(Je(Object(ie.a)(Object(ie.a)({},t),{},{id:Te()})))}}),s=a.isDragging,i=a.drag,o=s?"lime":"";return Object(O.jsxs)(d.b,{to:{pathname:"/ingredients/".concat(t._id),state:{background:r}},ref:i,className:ke.a.item,style:{borderColor:o},"data-test":"ingredient-item-".concat(t.type),children:[(null===n||void 0===n?void 0:n[t._id])&&Object(O.jsx)("div",{className:ke.a.counter,children:Object(O.jsx)(j.Counter,{count:n[t._id],size:"default"})}),Object(O.jsx)("img",{className:"".concat(ke.a.image," mb-1"),src:t.image,alt:t.name}),Object(O.jsxs)("div",{className:"".concat(ke.a.price," mb-1"),children:[Object(O.jsx)("span",{className:"text text_type_digits-default mr-2",children:t.price}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(O.jsx)("h4",{className:"".concat(ke.a.name," text text_type_main-default"),children:t.name})]})},Ze=n(116),Qe=n.n(Ze),Ve=function(e){var t=e.id,n=e.title,r=e.list,c=e.count;return Object(O.jsxs)("div",{id:t,className:"mb-10",children:[Object(O.jsx)("h3",{className:"text text_type_main-medium mb-6",children:n}),Object(O.jsx)("div",{className:"".concat(Qe.a.list," pl-4 pr-4"),children:r.map((function(e){return Object(O.jsx)(Ue,{count:c,item:e},e._id)}))})]})},Ye=n(85),$e=n.n(Ye),Xe=function(){return Object(I.b)()},Ke=I.c,et=function(){var e=Xe();return Object(i.useCallback)((function(t){return e(t).then(T.e)}),[e])},tt=function(){var e=Object(i.useState)(""),t=Object(ve.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)([]),a=Object(ve.a)(c,2),s=a[0],o=a[1],u=Object(i.useRef)(null),l=(Xe(),Ke(V).ingredients),d=Ke(He),j=d.bun,b=d.ingredients,m=Object(i.useMemo)((function(){var e=qe(l,"type");return o(Object.keys(e).map((function(e){return Be[e]}))),e}),[l]),p=Object(i.useMemo)((function(){var e=b.reduce((function(e,t){return e[t._id]=(e[t._id]||0)+1,e}),{});return j&&(e[j._id]=2),e}),[b,j]),f=function(){var e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;if(t)for(var r=t.getBoundingClientRect().top+n,c=e.length-1;c>=0;c--){var a=e[c];if(a.$el)if(a.$el.getBoundingClientRect().top<r)return a}}(s.map((function(e){return{name:e,$el:document.getElementById(Be[e])}})),u.current);e&&r(e.name)};return Object(i.useEffect)((function(){var e=u.current;return e&&e.addEventListener("scroll",f),function(){e&&e.removeEventListener("scroll",f)}}),[u,s]),Object(O.jsxs)("div",{className:$e.a.container,children:[Object(O.jsx)(we,{tabs:s,currentTab:n||s[0],setCurrentTab:function(e){var t=document.getElementById(Be[e]);t&&u.current&&function(e,t){var n=e.offsetTop;t.scrollTo({top:n,behavior:"smooth"})}(t,u.current)}}),Object(O.jsx)("div",{ref:u,className:"".concat($e.a.list," custom-scroll mt-10"),children:s.map((function(e){return Object(O.jsx)(Ve,{id:Be[e],title:e,count:p,list:m[Be[e]]},e)}))})]})},nt=n(63),rt=n.n(nt),ct=n.p+"static/media/done.409b92ac.jpg",at=function(e){var t=e.number,n=e.name;return Object(O.jsxs)("div",{className:"".concat(rt.a.order," pt-9"),children:[Object(O.jsx)("span",{className:"".concat(rt.a.number," text text_type_digits-large mb-8"),children:t}),Object(O.jsx)("span",{className:"text text_type_main-medium mb-15",children:n}),Object(O.jsx)("img",{className:"".concat(rt.a.image," mb-15"),src:ct,alt:"done"}),Object(O.jsx)("span",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(O.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},st=n(86),it=n.n(st),ot=Object(T.c)("order/fetchOrderStatus",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(B,{method:"POST",body:JSON.stringify(t),headers:{authorization:localStorage.getItem("accessToken"),"Content-Type":"application/json"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ut=Object(T.c)("order/fetchOrderInfo",function(){var e=Object(E.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/").concat(t)).then(z));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),lt={request:!1,error:!1,order:{number:NaN,name:""},info:null},dt=Object(T.d)({name:"order",initialState:lt,reducers:{clearOrder:function(e){e.info=null}},extraReducers:(a={},Object(k.a)(a,ot.pending.type,(function(e){e.request=!0,e.error=!1})),Object(k.a)(a,ot.fulfilled.type,(function(e,t){e.request=!1,e.order.name=t.payload.order.name,e.order.number=t.payload.order.number})),Object(k.a)(a,ot.rejected.type,(function(e,t){e.request=!1,e.order=Object(ie.a)({},lt.order),e.error=t.error.message})),Object(k.a)(a,ut.pending.type,(function(e){e.request=!0,e.error=!1})),Object(k.a)(a,ut.fulfilled.type,(function(e,t){e.request=!1,e.info=t.payload.orders[0]})),Object(k.a)(a,ut.rejected.type,(function(e,t){e.request=!1,e.info=null,e.error=t.error.message})),a)}),jt=dt.actions.clearOrder,bt=function(e){return e.order},mt=dt.reducer,pt=function(){var e,t,n=Xe(),r=Ke(xe).user,c=null===(e=Object(b.h)().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname;return Object(i.useEffect)((function(){var e=localStorage.getItem("refreshToken"),t=localStorage.getItem("accessToken");e&&t&&n(be(t))}),[]),{user:r,from:c,isAuth:!!r.name}},Ot=function(e){var t=e.totalPrice,n=e.orderList,r=Object(b.g)(),c=et(),a=pt().isAuth,s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.onOpen,r=t.onClose,c=Object(i.useState)(e),a=Object(ve.a)(c,2),s=a[0],o=a[1],u=function(){o(!0),"function"===typeof n&&n()},l=function(){o(!1),"function"===typeof r&&r()};return{isOpen:s,toggle:function(){s?l():u()},open:u,close:l}}(!1,{onClose:function(){x(We())}}),o=s.isOpen,u=s.open,l=s.close,d=Object(I.c)(bt),m=d.request,p=d.order,f=Object(I.c)(He).bun,x=Object(I.b)();return Object(O.jsxs)("div",{className:it.a.checkout,children:[Object(O.jsxs)("div",{className:"".concat(it.a.price," mr-10"),children:[Object(O.jsx)("span",{className:"text text_type_digits-medium mr-2",children:t||0}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(O.jsx)(j.Button,{type:"primary",size:"large",onClick:function(){a?n&&n.length>1&&f&&c(ot({ingredients:n})).then((function(e){e.success&&u()})):r.push("/login")},children:m?"\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c...":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),o&&Object(O.jsx)(se,{close:l,classes:"pt-15 pb-30",children:Object(O.jsx)(at,{number:p.number,name:p.name})})]})},ft=n(216),xt=function(e){var t=Object(ft.a)((function(){return{accept:Array.isArray(e)?Object(Le.a)(e):e,collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),n=Object(ve.a)(t,2),r=n[0],c=r.canDrop,a=r.isOver;return{drop:n[1],canDrop:c,isOver:a}},ht=n(41),_t=n.n(ht),gt=function(e){var t=e.canDrop,n=e.isOver,r=e.text,c=e.type,a=e.classes;return Object(O.jsx)("div",{className:"\n      burger-constructor-preview\n      ".concat(_t.a.preview,"\n      ").concat("top"===c?_t.a.previewTop:"bottom"===c?_t.a.previewBottom:"","\n      ").concat(t?_t.a.previewCanDrop:"","\n      ").concat(n?_t.a.previewIsOver:"","\n      ").concat(a,"\n    "),children:Object(O.jsx)("p",{className:"text text_type_main-default",children:r})})},vt=n(117),yt=n.n(vt),Nt=function(e){var t=e.item,n=e.icon,r=e.handleClose,c=e.isLocked,a=e.type,s=e.index,o=Object(I.b)(),u=Object(i.useRef)(null),l=Object(ft.a)({accept:"constructorItem",hover:function(e,t){var n;if(u.current){var r=e.index,c=s;if(r!==c){var a=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect(),i=(a.bottom-a.top)/2,l=t.getClientOffset();if(void 0!==r&&void 0!==c&&null!==l){var d=l.y-a.top;r<c&&d<i||r>c&&d>i||(o(ze({dragIndex:r,hoverIndex:c})),e.index=c)}}}}}),d=Object(ve.a)(l,2)[1],b=Object(Pe.a)({type:"constructorItem",item:function(){return Object(ie.a)(Object(ie.a)({},t),{},{index:s})},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(ve.a)(b,2),p=m[0].isDragging?0:1;return(0,m[1])(d(u)),Object(O.jsxs)("div",{ref:u,className:"".concat(yt.a.item," pr-2"),style:{opacity:p},children:[n&&Object(O.jsx)("div",{className:"mr-2",children:Object(O.jsx)(j.DragIcon,{type:"primary"})}),Object(O.jsx)(j.ConstructorElement,{type:a,thumbnail:t.image,text:"".concat(t.name," ").concat("top"===a?"(\u0432\u0435\u0440\u0445)":"bottom"===a?"(\u043d\u0438\u0437)":""),price:t.price,handleClose:r,isLocked:c})]})},wt=n(87),It=n.n(wt),kt=function(){var e=Xe(),t=Object(b.g)(),n=Ke(He),r=n.ingredients,c=n.bun;Object(i.useEffect)((function(){t.replace({state:{}})}),[]);var a=xt(["main","sauce"]),s=a.drop,o=a.canDrop,u=a.isOver,l=xt(["bun"]),d=l.drop,j=l.canDrop,m=l.isOver,p=xt(["bun"]),f=p.drop,x=p.canDrop,h=p.isOver,_=Object(i.useMemo)((function(){var e=r.reduce((function(e,t){return e+t.price}),0)+(c?2*c.price:0),t=r.map((function(e){return e._id}));return c&&t.push(c._id),{totalPrice:e,orderList:t}}),[r,c]),g=_.totalPrice,v=_.orderList;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"".concat(It.a.constructor," mb-10"),children:[Object(O.jsx)("div",{ref:d,className:"pl-9",children:c?Object(O.jsx)(Nt,{type:"top",item:c,isLocked:!0}):Object(O.jsx)(gt,{canDrop:j,isOver:m,type:"top",text:j&&m?"\u041c\u043e\u0436\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c \ud83d\udc4d":"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})}),Object(O.jsxs)("div",{ref:s,className:"".concat(It.a.list," custom-scroll"),children:[!r.length&&Object(O.jsx)(gt,{canDrop:o,isOver:u,text:o&&u?"\u041c\u043e\u0436\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c \ud83d\udc4d":"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0438\u043b\u0438 \u0441\u043e\u0443\u0441",classes:"ml-9"}),r.map((function(t,n){return Object(O.jsx)(Nt,{item:t,index:n,icon:!0,handleClose:function(){return e(Ae(t.id))}},t.id)}))]}),Object(O.jsx)("div",{ref:f,className:"pl-9",children:c?Object(O.jsx)(Nt,{type:"bottom",item:c,isLocked:!0}):Object(O.jsx)(gt,{canDrop:x,isOver:h,type:"bottom",text:x&&h?"\u041c\u043e\u0436\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c \ud83d\udc4d":"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443"})})]}),Object(O.jsx)(Ot,{totalPrice:g,orderList:v})]})},Ct=n(213),St=n(121),Et=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{style:{width:"100%"},className:"mb-5 text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(O.jsxs)(Ct.a,{backend:St.a,children:[Object(O.jsx)(tt,{}),Object(O.jsx)(kt,{})]})]})},Tt=n(89),Dt=n.n(Tt),qt=function(e){var t=e.children,n=e.title,r=e.button,c=e.load,a=e.info,s=e.onSubmit;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:Dt.a.form,onSubmit:function(e){e.preventDefault(),c||"function"!==typeof s||s()},children:[n&&Object(O.jsx)("p",{className:"text text_type_main-medium",children:n}),t,r&&Object(O.jsx)(j.Button,{children:c?"\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c...":r})]}),a&&Object(O.jsx)("div",{className:"".concat(Dt.a.info," mt-20"),children:a})]})},Bt=function(){var e=Xe(),t=Object(i.useState)({email:"",password:""}),n=Object(ve.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(!1),s=Object(ve.a)(a,2),o=s[0],u=s[1],l=Ke(xe),m=l.request,p=l.error,f=pt(),x=f.isAuth,h=f.from,_=function(e){var t=e.target,n=t.name,a=t.value;c(Object(ie.a)(Object(ie.a)({},r),{},Object(k.a)({},n,a)))};if(x)return Object(O.jsx)(b.a,{to:h||"/"});var g=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("p",{className:"text text_type_main-small text_color_inactive mb-4",children:["\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(O.jsx)(d.b,{className:"link",to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(O.jsxs)("p",{className:"text text_type_main-small text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",Object(O.jsx)(d.b,{className:"link",to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]});return Object(O.jsx)("div",{className:"container flex-center",children:Object(O.jsxs)(qt,{title:"\u0412\u0445\u043e\u0434",button:"\u0412\u043e\u0439\u0442\u0438",load:m,onSubmit:function(){var t={email:r.email,password:r.password};e(le(t))},info:g,children:[Object(O.jsx)(j.Input,{type:"email",value:r.email,placeholder:"E-mail",onChange:_,name:"email",error:!!p}),Object(O.jsx)(j.Input,{type:o?"text":"password",value:r.password,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:_,icon:o?"HideIcon":"ShowIcon",onIconClick:function(){return u(!o)},name:"password",error:!!p,errorText:p||""})]})})},Pt=function(){var e=Xe(),t=Object(i.useState)({name:"",email:"",password:""}),n=Object(ve.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)(!1),s=Object(ve.a)(a,2),o=s[0],u=s[1],l=Ke(xe),m=l.request,p=l.error,f=pt(),x=f.isAuth,h=f.from,_=function(e){var t=e.target,n=t.name,a=t.value;c(Object(ie.a)(Object(ie.a)({},r),{},Object(k.a)({},n,a)))};if(x)return Object(O.jsx)(b.a,{to:h||"/"});var g=Object(O.jsxs)("p",{className:"text text_type_main-small text_color_inactive mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(O.jsx)(d.b,{className:"link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]});return Object(O.jsx)("div",{className:"container flex-center",children:Object(O.jsxs)(qt,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",button:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",load:m,onSubmit:function(){var t={name:r.name,email:r.email,password:r.password};e(ue(t))},info:g,children:[Object(O.jsx)(j.Input,{type:"text",value:r.name,placeholder:"\u0418\u043c\u044f",onChange:_,name:"name",error:!!p}),Object(O.jsx)(j.Input,{type:"email",value:r.email,placeholder:"E-mail",onChange:_,name:"email",error:!!p}),Object(O.jsx)(j.Input,{type:o?"text":"password",value:r.password,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:_,icon:o?"HideIcon":"ShowIcon",onIconClick:function(){return u(!o)},name:"password",error:!!p,errorText:p||""})]})})},Lt=function(){var e=et(),t=Object(b.g)(),n=Object(i.useState)(""),r=Object(ve.a)(n,2),c=r[0],a=r[1],s=Ke(xe),o=s.request,u=s.error,l=pt(),m=l.isAuth,p=l.from;if(m)return Object(O.jsx)(b.a,{to:p||"/"});var f=Object(O.jsxs)("p",{className:"text text_type_main-small text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(O.jsx)(d.b,{className:"link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]});return Object(O.jsx)("div",{className:"container flex-center",children:Object(O.jsx)(qt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",button:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",load:o,onSubmit:function(){e(de({email:c})).then((function(e){e.success&&t.push("/reset-password")}))},info:f,children:Object(O.jsx)(j.Input,{type:"email",value:c,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return a(e.target.value)},name:"email",error:!!u,errorText:u||""})})})},Ft=function(){var e=et(),t=Object(b.g)(),n=Object(i.useState)({code:"",password:""}),r=Object(ve.a)(n,2),c=r[0],a=r[1],s=Object(i.useState)(!1),o=Object(ve.a)(s,2),u=o[0],l=o[1],m=Ke(xe),p=m.request,f=m.passwordReset,x=m.error,h=pt(),_=h.isAuth,g=h.from;if(_||!f)return Object(O.jsx)(b.a,{to:g||"/"});var v=function(e){var t=e.target,n=t.name,r=t.value;a(Object(ie.a)(Object(ie.a)({},c),{},Object(k.a)({},n,r)))},y=Object(O.jsxs)("p",{className:"text text_type_main-small text_color_inactive mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(O.jsx)(d.b,{className:"link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]});return Object(O.jsx)("div",{className:"container flex-center",children:Object(O.jsxs)(qt,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",load:p,onSubmit:function(){var n={password:c.password,token:c.code};e(je(n)).then((function(e){e.success&&t.push("/login")}))},info:y,children:[Object(O.jsx)(j.Input,{type:u?"text":"password",value:c.password,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:v,icon:u?"HideIcon":"ShowIcon",onIconClick:function(){return l(!u)},name:"password",error:!!x}),Object(O.jsx)(j.Input,{type:"text",value:c.code,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:v,name:"code",error:!!x,errorText:x||""})]})})},Mt=n(36),Rt=n.n(Mt),At=function(){var e=Xe();return Object(O.jsxs)("div",{className:Rt.a.sidebar,children:[Object(O.jsx)(d.c,{to:"/profile",exact:!0,activeClassName:Rt.a.active,className:" ".concat(Rt.a.button," text text_type_main-medium"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(O.jsx)(d.c,{to:"/profile/orders",exact:!0,activeClassName:Rt.a.active,className:"".concat(Rt.a.button," text text_type_main-medium"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(O.jsx)("button",{className:"".concat(Rt.a.button," text text_type_main-medium"),onClick:function(){e(pe())},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(O.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",style:{opacity:.4},children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435",Object(O.jsx)("br",{})," \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"]})]})},Jt=n(90),Wt=n.n(Jt),zt=function(){var e=et(),t=Object(i.useState)({name:"",email:"",password:""}),n=Object(ve.a)(t,2),r=n[0],c=n[1],a=Object(i.useState)({name:!0,email:!0,password:!0}),s=Object(ve.a)(a,2),o=s[0],u=s[1],l=Ke(xe),d=l.request,b=l.user;Object(i.useEffect)((function(){var e=b.name,t=b.email;c(Object(ie.a)(Object(ie.a)({},r),{},{name:e,email:t}))}),[]);var m=Object(i.useCallback)((function(){return JSON.stringify(b)!==JSON.stringify({email:r.email,name:r.name})||!!r.password.length}),[b,r]),p=function(e){var t=e.target,n=t.name,a=t.value;c(Object(ie.a)(Object(ie.a)({},r),{},Object(k.a)({},n,a)))},f=function(e){u(Object(ie.a)(Object(ie.a)({},o),{},Object(k.a)({},e,!o[e])))};return Object(O.jsxs)("div",{className:"".concat(Wt.a.profile," container"),children:[Object(O.jsx)(At,{}),d?Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(O.jsxs)("div",{className:Wt.a.form,children:[Object(O.jsxs)(qt,{children:[Object(O.jsx)(j.Input,{type:"text",value:r.name,disabled:o.name,placeholder:"\u0418\u043c\u044f",onChange:p,name:"name",icon:o.name?"EditIcon":"CheckMarkIcon",onIconClick:function(){f("name")}}),Object(O.jsx)(j.Input,{type:"email",value:r.email,disabled:o.email,placeholder:"E-mail",onChange:p,name:"email",icon:o.email?"EditIcon":"CheckMarkIcon",onIconClick:function(){f("email")}}),Object(O.jsx)(j.Input,{type:o.password?"password":"text",value:r.password,disabled:o.password,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:p,name:"password",icon:o.password?"EditIcon":"CheckMarkIcon",onIconClick:function(){f("password")}})]}),m()&&Object(O.jsxs)("div",{className:"mt-6",style:{display:"flex",justifyContent:"flex-end"},children:[Object(O.jsx)(j.Button,{type:"secondary",onClick:function(){c({name:b.name,email:b.email,password:""})},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(O.jsx)(j.Button,{onClick:function(){e(me(r)).then((function(e){var t=e.user,n=t.name,r=t.email;c({name:n,email:r,password:""})}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})},Ht=n(118),Gt=n.n(Ht),Ut=function(){return Object(O.jsxs)("div",{className:Gt.a.error,children:[Object(O.jsx)("p",{className:"text text_type_main-large mt-4 mb-8",children:"Page not found - 404"}),Object(O.jsxs)("p",{className:"text text_type_main-default",children:["go to ",Object(O.jsx)(d.b,{className:"link",to:"/",children:"home"})]})]})},Zt=n(119),Qt=n.n(Zt),Vt=function(){return Object(O.jsx)("div",{className:Qt.a.ingredient,children:Object(O.jsx)(K,{})})},Yt=n(64),$t=n.n(Yt),Xt=n(31),Kt=n.n(Xt),en=function(e){var t=e.ingredients,n=e.name,r=e.number,c=e.status,a=e.updatedAt,s=e.allIngredients,o=Object(b.h)(),u=Object(i.useMemo)((function(){var e=[];return t.forEach((function(t){var n=s.find((function(e){return e._id===t}));"bun"===(null===n||void 0===n?void 0:n.type)&&e.includes(n)||n&&e.push(n)})),e}),[s,t]),l=Object(i.useMemo)((function(){return u.reduce((function(e,t){return e+("bun"===t.type?2*t.price:t.price)}),0)}),[u]);return Object(O.jsxs)(d.b,{to:{pathname:"".concat(o.pathname,"/").concat(r),state:{background:o}},className:"".concat(Kt.a.order," p-6 mb-4"),children:[Object(O.jsxs)("div",{className:"".concat(Kt.a.head," mb-6"),children:[Object(O.jsxs)("p",{className:"text text_type_digits-default",children:["#",r]}),Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:De(a)})]}),Object(O.jsx)("p",{className:"text text_type_main-medium",children:n}),Object(O.jsx)("p",{className:"text text_type_main-default mb-6 ".concat("done"===c?"color-success":""),children:Be[c]}),Object(O.jsxs)("div",{className:Kt.a.footer,children:[Object(O.jsx)("div",{className:Kt.a.images,children:u.slice(0,6).map((function(e,t){return Object(O.jsxs)("div",{className:Kt.a.imageWrap,style:{zIndex:u.length-t},children:[5===t&&u.length-6>0&&Object(O.jsxs)("span",{className:"".concat(Kt.a.count," text text_type_main-default"),children:["+",u.length-6]}),Object(O.jsx)("img",{className:Kt.a.image,src:e.image_mobile})]},t)}))}),Object(O.jsxs)("p",{className:"".concat(Kt.a.price," text text_type_digits-default"),children:[Object(O.jsx)("span",{className:"mr-2",children:l}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})},tn=n(120),nn=n.n(tn),rn=function(e){var t=e.orders,n=Ke(V).ingredients;return Object(O.jsx)("div",{className:"".concat(nn.a.tape," custom-scroll"),children:t&&t.map((function(e,t){return Object(i.createElement)(en,Object(ie.a)(Object(ie.a)({allIngredients:n},e),{},{key:t}))}))})},cn=n(37),an=n.n(cn),sn=function(e){var t=e.total,n=e.totalToday,r=e.orders;return Object(O.jsxs)("div",{className:an.a.scoreboard,children:[Object(O.jsx)("div",{className:"".concat(an.a.progress," mb-15"),children:r&&Object.keys(r).map((function(e){return Object(O.jsxs)("div",{className:an.a.status,children:[Object(O.jsx)("p",{className:"text text_type_main-medium mb-6",children:Be["_"+e]}),Object(O.jsx)("div",{className:"\n              ".concat(an.a.list,"\n              custom-scroll\n              ").concat("done"===e?"color-success":"","\n            "),children:r[e].map((function(e){return Object(O.jsx)("p",{className:"text text_type_digits-default mb-2",children:e.number},e.number)}))})]},e)}))}),Object(O.jsxs)("div",{className:"mb-15",children:[Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(O.jsx)("p",{className:"".concat(an.a.number," text text_type_digits-large"),children:t})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(O.jsx)("p",{className:"".concat(an.a.number," text text_type_digits-large"),children:n})]})]})};!function(e){e.CONNECTING="CONNECTING...",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(s||(s={}));var on={status:s.OFFLINE,connectionError:"",data:null},un=Object(T.d)({name:"liveOrders",initialState:on,reducers:{wsConnecting:function(e){e.status=s.CONNECTING},wsOpen:function(e){e.status=s.ONLINE,e.connectionError=""},wsClose:function(e){e.status=s.OFFLINE},wsError:function(e,t){e.connectionError=t.payload},wsMessage:function(e,t){e.data=t.payload}}}),ln=Object(T.b)("LIVE_ORDERS_CONNECT"),dn=Object(T.b)("LIVE_ORDERS_DISCONNECT"),jn=un.actions,bn=jn.wsConnecting,mn=jn.wsOpen,pn=jn.wsClose,On=jn.wsError,fn=jn.wsMessage,xn=function(e){return e.liveOrders},hn=un.reducer,_n=function(){var e=Xe(),t=Object(b.g)(),n=Object(I.c)(xn).data;Object(i.useEffect)((function(){return t.replace({state:{}}),e(ln("wss://norma.nomoreparties.space/orders/all")),function(){e(dn())}}),[]);var r=Object(i.useMemo)((function(){if(n)return qe(n.orders,"status")}),[null===n||void 0===n?void 0:n.orders]);return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("p",{className:"text text_type_main-large mb-4",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(O.jsxs)("div",{className:$t.a.row,children:[Object(O.jsx)("div",{className:$t.a.col,children:Object(O.jsx)(rn,{orders:(null===n||void 0===n?void 0:n.orders)||null})}),Object(O.jsx)("div",{className:$t.a.col,children:Object(O.jsx)(sn,{total:null===n||void 0===n?void 0:n.total,totalToday:null===n||void 0===n?void 0:n.totalToday,orders:r})})]})]})},gn=n(29),vn=n.n(gn),yn=function(){var e=Object(b.i)().id,t=Xe(),n=Ke(bt).info,r=Ke(V).ingredients;Object(i.useEffect)((function(){t(jt()),t(ut(e))}),[]);var c=Object(i.useMemo)((function(){var e=[];return null===n||void 0===n||n.ingredients.forEach((function(t){var n=r.find((function(e){return e._id===t}));"bun"===(null===n||void 0===n?void 0:n.type)&&e.includes(n)||n&&e.push(n)})),e}),[r,n]),a=Object(i.useMemo)((function(){return c.reduce((function(e,t){return e+("bun"===t.type?2*t.price:t.price)}),0)}),[c]);return n?Object(O.jsxs)("div",{className:vn.a.order,children:[Object(O.jsxs)("p",{className:"".concat(vn.a.number," text text_type_digits-default mb-10"),children:["#",e]}),Object(O.jsx)("p",{className:"text text_type_main-medium mb-3",children:null===n||void 0===n?void 0:n.name}),Object(O.jsx)("p",{className:"text text_type_main-default color-success mb-15",children:n&&Be[n.status]}),Object(O.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(O.jsx)("ul",{className:"".concat(vn.a.list," custom-scroll"),children:c.map((function(e,t){return Object(O.jsxs)("li",{className:vn.a.item,children:[Object(O.jsx)("div",{className:vn.a.imageWrap,children:Object(O.jsx)("img",{className:vn.a.image,src:e.image_mobile})}),Object(O.jsx)("p",{style:{width:"100%"},className:"text text_type_main-default ml-4 mr-4",children:e.name}),Object(O.jsxs)("div",{className:vn.a.price,children:[Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:e.price}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(O.jsxs)("div",{className:vn.a.footer,children:[Object(O.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:n&&De(n.updatedAt)}),Object(O.jsxs)("div",{className:vn.a.price,children:[Object(O.jsx)("p",{className:"text text_type_digits-default mr-2",children:a}),Object(O.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]}):Object(O.jsx)("div",{className:vn.a.order,children:Object(O.jsx)("p",{className:"text text_type_main-medium mb-3",children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0437\u0430\u043a\u0430\u0437\u0435..."})})},Nn=function(){return Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(yn,{})})},wn=function(){var e=Xe(),t=Object(b.g)(),n=Ke(xn).data,r=localStorage.getItem("accessToken");return Object(i.useEffect)((function(){return t.replace({state:{}}),e(ln("wss://norma.nomoreparties.space/orders?token="+(null===r||void 0===r?void 0:r.slice(7)))),function(){e(dn())}}),[]),Object(O.jsxs)("div",{style:{display:"flex"},className:"container",children:[Object(O.jsx)(At,{}),Object(O.jsx)(rn,{orders:(null===n||void 0===n?void 0:n.orders)||null})]})},In=function(){var e=Object(b.h)(),t=Object(b.g)(),n=e.state&&e.state.background,r=function(){t.goBack()};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(b.d,{location:n||e,children:[Object(O.jsx)(ge,{path:"/profile",exact:!0,children:Object(O.jsx)(zt,{})}),Object(O.jsx)(ge,{path:"/profile/orders",exact:!0,children:Object(O.jsx)(wn,{})}),Object(O.jsx)(ge,{path:"/profile/orders/:id",exact:!0,children:Object(O.jsx)(Nn,{})}),Object(O.jsx)(b.b,{path:"/reset-password",children:Object(O.jsx)(Ft,{})}),Object(O.jsx)(b.b,{path:"/ingredients/:id",children:Object(O.jsx)(Vt,{})}),Object(O.jsx)(b.b,{path:"/forgot-password",children:Object(O.jsx)(Lt,{})}),Object(O.jsx)(b.b,{path:"/register",children:Object(O.jsx)(Pt,{})}),Object(O.jsx)(b.b,{path:"/login",children:Object(O.jsx)(Bt,{})}),Object(O.jsx)(b.b,{path:"/",exact:!0,children:Object(O.jsx)(Et,{})}),Object(O.jsx)(b.b,{path:"/feed",exact:!0,children:Object(O.jsx)(_n,{})}),Object(O.jsx)(b.b,{path:"/feed/:id",exact:!0,children:Object(O.jsx)(Nn,{})}),Object(O.jsx)(b.b,{path:"*",children:Object(O.jsx)(Ut,{})})]}),n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(b.b,{path:"/ingredients/:id",children:Object(O.jsx)(se,{close:r,title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",classes:"pt-10 pb-15",children:Object(O.jsx)(K,{})})}),Object(O.jsx)(b.b,{path:"/feed/:id",children:Object(O.jsx)(se,{close:r,classes:"pt-10 pb-15",children:Object(O.jsx)(Nn,{})})}),Object(O.jsx)(ge,{path:"/profile/orders/:id",children:Object(O.jsx)(se,{close:r,classes:"pt-10 pb-15",children:Object(O.jsx)(Nn,{})})})]})]})};var kn=function(){var e=Xe();return Object(i.useEffect)((function(){e(Z())}),[]),Object(O.jsx)(d.a,{children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(y,{}),Object(O.jsx)("main",{className:"".concat(w.a.main," container pb-10"),children:Object(O.jsx)(In,{})})]})})},Cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},Sn=(n(204),n(109),n(25)),En=function(e){return function(t){var n=null,r=!1,c=0,a="";return function(s){return function(i){var o=t.dispatch,u=e.wsConnect,l=e.wsDisconnect,d=e.wsSendMessage,j=e.onOpen,b=e.onClose,m=e.onError,p=e.onMessage,O=e.wsConnecting;u.match(i)&&(console.log("connect"),a=i.payload,n=new WebSocket(a),r=!0,o(O())),n&&(n.onopen=function(){o(j())},n.onerror=function(e){console.log("error")},n.onmessage=function(e){var t=e.data,n=JSON.parse(t);o(p(n))},n.onclose=function(e){1e3!==e.code&&(console.log("error"),o(m(e.code.toString()))),console.log("close"),o(b()),r&&(o(O()),c=window.setTimeout((function(){o(u(a))}),3e3))},d&&d.match(i)&&(console.log("send"),n.send(JSON.stringify(i.payload))),l.match(i)&&(console.log("disconnect"),clearTimeout(c),r=!1,c=0,n.close(),o(b()))),s(i)}}}}({wsConnect:ln,wsDisconnect:dn,wsConnecting:bn,onOpen:mn,onClose:pn,onError:On,onMessage:fn}),Tn=Object(Sn.b)({ingredients:Y,burgerConstructor:Ge,order:mt,auth:he,liveOrders:hn}),Dn=Object(T.a)({reducer:Tn,middleware:function(e){return e().concat(En)}});l.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(I.a,{store:Dn,children:Object(O.jsx)(kn,{})})}),document.getElementById("root")),Cn()},29:function(e,t,n){e.exports={order:"OrderInfo_order__n0BhV",number:"OrderInfo_number__2mhpC",list:"OrderInfo_list__2v1Rx",item:"OrderInfo_item__2vvMq",imageWrap:"OrderInfo_imageWrap__10NDM",image:"OrderInfo_image__GqCSA",price:"OrderInfo_price__36V7G",footer:"OrderInfo_footer__EZY_W"}},31:function(e,t,n){e.exports={order:"Order_order__1ID1O",head:"Order_head__3Dbgu",footer:"Order_footer__a1ZHa",price:"Order_price__kATnU",images:"Order_images__3b7I-",imageWrap:"Order_imageWrap__2l0qh",image:"Order_image__3FRzf",count:"Order_count__2R7yo"}},36:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__2n2bb",button:"Sidebar_button__2k5Em",active:"Sidebar_active__2Fbkk"}},37:function(e,t,n){e.exports={progress:"Scoreboard_progress__3Pwgt",status:"Scoreboard_status__hrjPI",list:"Scoreboard_list__3ncEl",number:"Scoreboard_number__2wRot"}},40:function(e,t,n){e.exports={item:"IngredientItem_item__3pucg",counter:"IngredientItem_counter__21bd3",image:"IngredientItem_image__L11HF",price:"IngredientItem_price__1P9MQ",name:"IngredientItem_name__2X3zQ"}},41:function(e,t,n){e.exports={preview:"BurgerConstructorPreview_preview__1r8kP",previewCanDrop:"BurgerConstructorPreview_previewCanDrop__2GneR",previewIsOver:"BurgerConstructorPreview_previewIsOver__2wXF_",previewTop:"BurgerConstructorPreview_previewTop__AWAsb",previewBottom:"BurgerConstructorPreview_previewBottom__380Hb"}},49:function(e,t,n){e.exports={button:"IconButton_button__1-fHh",active:"IconButton_active__1mfj8",icon:"IconButton_icon__3eop4",disabled:"IconButton_disabled__330wM"}},50:function(e,t,n){e.exports={ingredient:"IngredientDetails_ingredient__-51ds",image:"IngredientDetails_image__1NxAB",list:"IngredientDetails_list__38za9",item:"IngredientDetails_item__BEyJ7"}},51:function(e,t,n){e.exports={modal:"Modal_modal__3xYEC",content:"Modal_content__3ZkA7",head:"Modal_head__b5jaB",close:"Modal_close__2uWw3"}},62:function(e,t,n){e.exports={header:"AppHeader_header__uJm_a",container:"AppHeader_container__1a54t",logo:"AppHeader_logo__156i6"}},63:function(e,t,n){e.exports={order:"OrderDetails_order__2fuom",number:"OrderDetails_number__1i4S8",image:"OrderDetails_image__31kgB"}},64:function(e,t,n){e.exports={row:"Feed_row__1WMnw",col:"Feed_col__3ZgfW"}},85:function(e,t,n){e.exports={container:"BurgerIngredients_container__2wjGa",list:"BurgerIngredients_list__26itZ"}},86:function(e,t,n){e.exports={checkout:"Checkout_checkout__1RJUZ",price:"Checkout_price__3x0KT"}},87:function(e,t,n){e.exports={constructor:"BurgerConstructor_constructor__3eY2u",list:"BurgerConstructor_list__1yEE9"}},89:function(e,t,n){e.exports={form:"Form_form__cvyS-",info:"Form_info__3cdfn"}},90:function(e,t,n){e.exports={profile:"Profile_profile__SIL4B"}}},[[205,1,2]]]);
//# sourceMappingURL=main.58a5f252.chunk.js.map